<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»„ä»¶æµ‹è¯• - NER</title>
    <link rel="stylesheet" href="ner.css">
    <style>
        body { padding: 20px; }
        .test-section { margin-bottom: 30px; border: 2px dashed #ccc; padding: 20px; }
        .test-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #333; }
    </style>
</head>
<body>
    <h1>NER ç»„ä»¶æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <div class="test-title">æµ‹è¯• 1: CollapsibleBlock ç»„ä»¶</div>
        <div id="test-collapsible"></div>
    </div>

    <div class="test-section">
        <div class="test-title">æµ‹è¯• 2: Statistics ç»„ä»¶</div>
        <div id="test-statistics"></div>
    </div>

    <div class="test-section">
        <div class="test-title">æµ‹è¯• 3: ResultDisplay ç»„ä»¶</div>
        <div id="test-result"></div>
    </div>

    <div class="test-section">
        <div class="test-title">æµ‹è¯• 4: LogPanel ç»„ä»¶</div>
        <div id="test-log"></div>
    </div>

    <div class="test-section">
        <div class="test-title">æµ‹è¯• 5: å®Œæ•´åº”ç”¨</div>
        <div id="test-app"></div>
    </div>

    <!-- Preact and HTM -->
    <script src="https://unpkg.com/htm@3.1.1/preact/standalone.umd.js"></script>
    <script src="ner-components.js"></script>
    
    <script>
        const { html, render } = htmPreact;

        // æµ‹è¯• 1: CollapsibleBlock
        render(
            html`
                <${CollapsibleBlock} title="å¯æŠ˜å åŒºå—ç¤ºä¾‹">
                    <p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å¯æŠ˜å åŒºå—ã€‚</p>
                    <p>ç‚¹å‡»æ ‡é¢˜å¯ä»¥å±•å¼€/æ”¶èµ·å†…å®¹ã€‚</p>
                <//>
            `,
            document.getElementById('test-collapsible')
        );

        // æµ‹è¯• 2: Statistics
        const mockStats = {
            ttft: "120ms",
            totalTime: "2.5s",
            promptTokens: "150",
            completionTokens: "200",
            totalTokens: "350",
            speed: "80 tokens/s",
            finishReason: "stop"
        };
        render(
            html`<${Statistics} stats=${mockStats} />`,
            document.getElementById('test-statistics')
        );

        // æµ‹è¯• 3: ResultDisplay
        const mockEntities = {
            'PERSON': ['å¼ ä¸‰', 'æå››', 'ç‹äº”'],
            'TIME': ['æ˜å¤©ä¸‹åˆ3ç‚¹', '2024å¹´1æœˆ1æ—¥'],
            'LOCATION': ['åŒ—äº¬ä¼šè®®å®¤', 'ä¸Šæµ·'],
            'ORGANIZATION': ['æŸæŸå…¬å¸', 'ç ”å‘éƒ¨é—¨']
        };
        render(
            html`<${ResultDisplay} entities=${mockEntities} />`,
            document.getElementById('test-result')
        );

        // æµ‹è¯• 4: LogPanel
        const mockLogs = [
            { time: "14:30:20", message: "é¡µé¢å·²åŠ è½½", type: "info" },
            { time: "14:30:25", message: "å¼€å§‹åˆ†ææ–‡æœ¬", type: "info" },
            { time: "14:30:30", message: "æ¨¡å‹å“åº”æˆåŠŸ", type: "success" },
            { time: "14:30:32", message: "è­¦å‘Š: æ–‡æœ¬è¿‡é•¿", type: "warn" },
            { time: "14:30:35", message: "åˆ†æå®Œæˆ", type: "success" }
        ];
        render(
            html`<${LogPanel} logs=${mockLogs} />`,
            document.getElementById('test-log')
        );

        // æµ‹è¯• 5: å®Œæ•´åº”ç”¨
        render(
            html`<${App} />`,
            document.getElementById('test-app')
        );

        console.log('âœ… æ‰€æœ‰ç»„ä»¶å·²åŠ è½½');
        console.log('ğŸ“ è¯·åœ¨é¡µé¢ä¸Šæµ‹è¯•å„ä¸ªç»„ä»¶çš„äº¤äº’åŠŸèƒ½');
    </script>
</body>
</html>
