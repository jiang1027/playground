<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Tiktoken</title>
</head>
<body>
    <div id="logs"></div>
    <script type="module">
        import { getEncoding } from "https://esm.sh/js-tiktoken";

        function log(...args) {
            const div = document.getElementById('logs');
            div.innerHTML += args.map(a => JSON.stringify(a, null, 2)).join(' ') + '<br>';
        }

        const encoding = getEncoding("cl100k_base");
        log("Methods on encoding:", Object.keys(encoding));
        // log("Prototype methods:", Object.getOwnPropertyNames(Object.getPrototypeOf(encoding)));

        const tokens = encoding.encode("这");
        log("Tokens for '这':", tokens);
        
        try {
            if (encoding.decode_single_token_bytes) {
                const bytes = encoding.decode_single_token_bytes(tokens[0]);
                log("decode_single_token_bytes exists. Type:", typeof bytes, "Value:", bytes);
            } else {
                log("decode_single_token_bytes does NOT exist on instance");
            }
        } catch (e) {
            log("Error checking decode_single_token_bytes:", e.message);
        }
    </script>
</body>
</html>
